(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{15:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__yrl_y",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__JNaul"}},17:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1BupL",Modal:"Modal_Modal__MLb4I"}},31:function(e,t,a){e.exports={Button:"Button_Button__3czq0"}},33:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2iMQ2"}},38:function(e,t,a){},39:function(e,t,a){},7:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar___llFV",SearchForm:"Searchbar_SearchForm__1RUQv",SearchFormButton:"Searchbar_SearchFormButton__2VG42",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__1nNMW",SearchFormInput:"Searchbar_SearchFormInput__2JjLB"}},85:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(12),s=a.n(c),o=(a(38),a(5)),u=(a(39),a(7)),i=a.n(u),l=a(0);function h(e){var t=e.getSearchValue,a=Object(r.useState)(""),n=Object(o.a)(a,2),c=n[0],s=n[1],u=Object(r.useCallback)((function(e){return s(e.target.value)}),[]),h=Object(r.useCallback)((function(e){e.preventDefault(),t(c),s("")}),[c]);return Object(l.jsx)("header",{className:i.a.Searchbar,children:Object(l.jsxs)("form",{className:i.a.SearchForm,onSubmit:h,children:[Object(l.jsx)("button",{type:"submit",className:i.a.SearchFormButton,children:Object(l.jsx)("span",{className:i.a.SearchFormButtonLabel,children:"Search"})}),Object(l.jsx)("input",{className:i.a.SearchFormInput,type:"text",name:"searchValue",value:c,onChange:u,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var m=a(6),b=a(15),g=a.n(b);function j(e){var t=e.image,a=e.onClickImage,r=t.id,n=t.webformatURL,c=t.tags;return Object(l.jsx)("li",{className:g.a.ImageGalleryItem,onClick:a,children:Object(l.jsx)("img",{src:n,alt:c,id:r,className:g.a.ImageGalleryItem_image})},r)}j.defaultProps={webformatURL:"",tags:"Image URL"};var d=a(16),p=a.n(d),f=a(27),O=a(28),_=a(29),y=a(30),v=a.n(y),x=a(3),I=(a(60),a(61),a(62),a(63),a(9));function S(e){Object(x.error)({text:e,delay:4e3,modules:new Map([].concat(Object(m.a)(x.defaultModules),[[I,{swipeDismiss:!0}]]))})}x.defaults.styling="angeler",x.defaults.icons="angeler",x.defaults.delay=800,x.defaults.sticker=!1,x.defaults.animateSpeed="slow",x.defaults.shadow=!1;var k=function(){function e(t,a){Object(O.a)(this,e),this.base_url=t,this.api_key=a,this._searchQuery="",this._page=1,this._perPage=12,this.endPoint=""}return Object(_.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"perPage",get:function(){return this._perPage},set:function(e){return this._perPage=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"searchImages",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"image_type=photo&orientation=horizontal",t="?q=".concat(this.searchQuery,"&page=").concat(this.page,"&per_page=").concat(this.perPage,"&key=").concat(this.api_key,"&").concat("image_type=photo&orientation=horizontal"),a=this.base_url+this.endPoint+t,e.prev=3,e.next=6,v.a.get(a);case 6:return r=e.sent,e.next=9,r.data.hits;case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",S(e.t0.message));case 15:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),w=a(31),F=a.n(w);function L(e){var t=e.onClick;return Object(l.jsx)("button",{type:"button",className:F.a.Button,onClick:t,children:"Load more"})}var N=a(17),B=a.n(N);function C(e){var t=e.image,a=e.toggleModal,n=function(e){e.currentTarget!==e.target&&"Escape"!==e.code||a()};Object(r.useEffect)((function(){return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}));var s=t.largeImageURL,o=t.tags;return Object(c.createPortal)(Object(l.jsx)("div",{className:B.a.Overlay,onClick:n,children:Object(l.jsx)("div",{className:B.a.Modal,children:Object(l.jsx)("img",{src:s,alt:o})})}),document.getElementById("modalRoot"))}C.defaultProps={largeImageURL:"",tags:"large Image URL"};var M=a(32),G=a.n(M);a(84);function P(){return Object(l.jsx)(G.a,{className:"Loader",type:"Oval",color:"#00BFFF",height:100,width:100,timeout:3e3})}var R=a(33),E=a.n(R),Q="init",V="pending",U="success",A="error",J=new k("https://pixabay.com/api/","23045990-a26bb8d890e0b5c9b60396550");function z(e){var t=e.searchValue,a=Object(r.useState)([]),n=Object(o.a)(a,2),c=n[0],s=n[1],u=Object(r.useState)(Q),i=Object(o.a)(u,2),h=i[0],b=i[1],g=Object(r.useState)(!1),d=Object(o.a)(g,2),p=d[0],f=d[1],O=Object(r.useState)({}),_=Object(o.a)(O,2),y=_[0],v=_[1];Object(r.useEffect)((function(){""!==t&&(s([]),b(V),J.resetPage(),J.searchQuery=t,x())}),[t]);function x(){J.searchImages().then((function(e){s((function(t){return[].concat(Object(m.a)(t),Object(m.a)(e))})),b(U),1!==J.page&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){b(A),S(e.message)}))}var I=Object(r.useCallback)((function(){J.page=1,x()}),[]),k=function(e){var t=c.find((function(t){return Number(t.id)===Number(e)}));v(t),F()},w=Object(r.useCallback)((function(e){return k(e.target.id)}),[k]),F=Object(r.useCallback)((function(){return f(!p)}),[p]);return h===Q?Object(l.jsx)("h1",{children:" "}):h===V?Object(l.jsx)(P,{}):h===U?c.length>0&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("ul",{className:E.a.ImageGallery,children:c.map((function(e){return Object(l.jsx)(j,{image:e,onClickImage:w})}))}),Object(l.jsx)(L,{onClick:I}),p&&Object(l.jsx)(C,{image:y,toggleModal:F})]}):h===A?Object(l.jsx)("h1",{children:"ALARMA!!!"}):void 0}function q(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(h,{getSearchValue:n}),Object(l.jsx)(z,{searchValue:a})]})})}z.defaultProps={searchValue:""},s.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(q,{})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.8aa27bae.chunk.js.map