{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/notify.js","services/pixabay.js","components/Button/Button.js","components/Modal/Modal.js","components/Loader/Loader.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["INITIAL_STATE","searchValue","perPage","Searchbar","state","handleChange","e","target","name","value","setState","handleSubmit","preventDefault","props","getSearchValues","resetForm","this","className","onSubmit","type","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","handleClick","onClickImage","image","id","webformatURL","tags","onClick","src","alt","notifyError","txt","error","text","delay","modules","Map","defaultModules","PNotifyMobile","swipeDismiss","defaults","styling","icons","sticker","animateSpeed","shadow","PixabayFetch","base_url","api_key","_searchQuery","_page","_perPage","endPoint","a","params","searchQuery","page","url","axios","get","result","data","hits","message","Button","Modal","handleCloseOrEscape","currentTarget","code","toggleModal","window","addEventListener","removeEventListener","largeImageURL","createPortal","document","getElementById","LoaderSpinner","color","height","width","timeout","newPixabayFetch","ImageGallery","gallery","status","showModal","scrolling","scrollTo","top","documentElement","scrollHeight","behavior","fetch","showImage","find","Number","handleImageClick","searchImages","then","prev","catch","err","prevProps","prevState","resetPage","length","map","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.581cb876.chunk.js","sourcesContent":["import { Component } from 'react'\r\n\r\nconst INITIAL_STATE = {\r\n  searchValue: '',\r\n  perPage: 12,\r\n}\r\n\r\nexport class Searchbar extends Component {\r\n  state = { ...INITIAL_STATE }\r\n\r\n  handleChange = (e) => {\r\n    const { name, value } = e.target\r\n    this.setState({\r\n      [name]: value,\r\n    })\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const { searchValue, perPage } = this.state\r\n    this.props.getSearchValues(searchValue, perPage)\r\n    this.resetForm()\r\n  }\r\n\r\n  resetForm = () => this.setState({ ...INITIAL_STATE })\r\n\r\n  render() {\r\n    const { handleChange, handleSubmit } = this\r\n\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            name=\"searchValue\"\r\n            value={this.state.searchValue}\r\n            onChange={handleChange}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    )\r\n  }\r\n}\r\n","import { Component } from 'react'\r\n\r\nexport class ImageGalleryItem extends Component {\r\n  handleClick = (e) => this.props.onClickImage(e)\r\n\r\n  render() {\r\n    const { id, webformatURL, tags } = this.props.image\r\n    return (\r\n      <li key={id} className=\"ImageGalleryItem\" onClick={this.handleClick}>\r\n        <img\r\n          src={webformatURL}\r\n          alt={tags}\r\n          id={id}\r\n          className=\"ImageGalleryItem-image\"\r\n        />\r\n      </li>\r\n    )\r\n  }\r\n}\r\n","import {\r\n  alert,\r\n  error,\r\n  info,\r\n  defaultModules,\r\n  success,\r\n  defaults,\r\n} from '../../node_modules/@pnotify/core/dist/PNotify.js'\r\nimport '@pnotify/core/dist/PNotify.css'\r\nimport '@pnotify/core/Angeler.css'\r\nimport '@pnotify/core/Material.css'\r\nimport '@pnotify/mobile/dist/PNotifyMobile.css'\r\nimport * as PNotifyMobile from '@pnotify/mobile'\r\n\r\ndefaults.styling = 'angeler'\r\ndefaults.icons = 'angeler'\r\ndefaults.delay = 800\r\ndefaults.sticker = false\r\ndefaults.animateSpeed = 'slow'\r\ndefaults.shadow = false\r\n\r\nexport function notifyAlert(txt) {\r\n  alert({\r\n    text: txt,\r\n    modules: new Map([\r\n      ...defaultModules,\r\n      [\r\n        PNotifyMobile,\r\n        {\r\n          swipeDismiss: true,\r\n        },\r\n      ],\r\n    ]),\r\n  })\r\n}\r\nexport function notifyError(txt) {\r\n  error({\r\n    text: txt,\r\n    delay: 4000,\r\n    modules: new Map([\r\n      ...defaultModules,\r\n      [\r\n        PNotifyMobile,\r\n        {\r\n          swipeDismiss: true,\r\n        },\r\n      ],\r\n    ]),\r\n  })\r\n}\r\nexport function notifyInfo(txt) {\r\n  info({\r\n    text: txt,\r\n    modules: new Map([\r\n      ...defaultModules,\r\n      [\r\n        PNotifyMobile,\r\n        {\r\n          swipeDismiss: true,\r\n        },\r\n      ],\r\n    ]),\r\n  })\r\n}\r\nexport function notifySuccess(txt) {\r\n  success({\r\n    text: txt,\r\n    delay: 1200,\r\n    modules: new Map([\r\n      ...defaultModules,\r\n      [\r\n        PNotifyMobile,\r\n        {\r\n          swipeDismiss: true,\r\n        },\r\n      ],\r\n    ]),\r\n  })\r\n}\r\n","import axios from 'axios'\r\nimport { notifyError } from '../components/notify'\r\n\r\nexport class PixabayFetch {\r\n  constructor(base_url, api_key) {\r\n    this.base_url = base_url\r\n    this.api_key = api_key\r\n    this._searchQuery = ''\r\n    this._page = 1\r\n    this._perPage = 12\r\n    this.endPoint = ''\r\n  }\r\n  get searchQuery() {\r\n    return this._searchQuery\r\n  }\r\n  set searchQuery(value) {\r\n    return (this._searchQuery = value)\r\n  }\r\n  get page() {\r\n    return this._page\r\n  }\r\n  set page(value) {\r\n    return (this._page += value)\r\n  }\r\n  get perPage() {\r\n    return this._perPage\r\n  }\r\n  set perPage(value) {\r\n    return (this._perPage = value)\r\n  }\r\n\r\n  resetPage() {\r\n    return (this._page = 1)\r\n  }\r\n\r\n  async searchImages() {\r\n    const type = 'image_type=photo&orientation=horizontal'\r\n    let params = `?q=${this.searchQuery}&page=${this.page}&per_page=${this.perPage}&key=${this.api_key}&${type}`\r\n    let url = this.base_url + this.endPoint + params\r\n\r\n    try {\r\n      const result = await axios.get(url)\r\n      return await result.data.hits\r\n    } catch (err) {\r\n      return notifyError(err.message)\r\n    }\r\n  }\r\n}\r\n","export function Button({ onClick }) {\r\n  return (\r\n    <button type=\"button\" className=\"Button\" onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  )\r\n}\r\n","import { Component } from 'react'\r\nimport { createPortal } from 'react-dom'\r\n\r\nexport class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleCloseOrEscape)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleCloseOrEscape)\r\n  }\r\n\r\n  handleCloseOrEscape = (e) => {\r\n    if (e.currentTarget === e.target || e.code === 'Escape') {\r\n      this.props.toggleModal()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { largeImageURL, tags } = this.props.image\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleCloseOrEscape}>\r\n        <div className=\"Modal\">\r\n          <img src={largeImageURL} alt={tags} />\r\n        </div>\r\n      </div>,\r\n      document.getElementById('modalRoot'),\r\n    )\r\n  }\r\n}\r\n","import { Component } from 'react'\r\nimport Loader from 'react-loader-spinner'\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css'\r\n\r\nexport default class LoaderSpinner extends Component {\r\n  render() {\r\n    return (\r\n      <Loader\r\n        className=\"Loader\"\r\n        type=\"Oval\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} //3 secs\r\n      />\r\n    )\r\n  }\r\n}\r\n","import { Component } from 'react'\r\nimport { ImageGalleryItem } from '../ImageGalleryItem/ImageGalleryItem'\r\nimport { PixabayFetch } from '../../services/pixabay'\r\nimport { Button } from '../Button/Button'\r\nimport { Modal } from '../Modal/Modal'\r\nimport { notifyError } from '../notify'\r\nimport LoaderSpinner from '../Loader/Loader'\r\n\r\nconst base_url = `https://pixabay.com/api/`\r\nconst api_key = `23045990-a26bb8d890e0b5c9b60396550`\r\nconst newPixabayFetch = new PixabayFetch(base_url, api_key)\r\n\r\nexport class ImageGallery extends Component {\r\n  state = {\r\n    gallery: [],\r\n    status: 'init',\r\n    showModal: false,\r\n    image: {},\r\n  }\r\n\r\n  scrolling = () =>\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    })\r\n\r\n  fetch() {\r\n    newPixabayFetch\r\n      .searchImages()\r\n      .then((gallery) => {\r\n        if (this.state.status === 'pending') {\r\n          this.setState({ gallery })\r\n        } else {\r\n          this.setState((prev) => ({\r\n            gallery: [...prev.gallery, ...gallery],\r\n          }))\r\n          this.scrolling()\r\n        }\r\n\r\n        this.setState({ status: 'success' })\r\n      })\r\n      .catch((err) => {\r\n        this.setState({ status: 'error' })\r\n        notifyError(err.message)\r\n      })\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.searchValue !== this.props.searchValue) {\r\n      this.setState({ status: 'pending' })\r\n      newPixabayFetch.resetPage()\r\n      newPixabayFetch.searchQuery = this.props.searchValue\r\n      this.fetch()\r\n    }\r\n  }\r\n\r\n  handleClick = () => {\r\n    newPixabayFetch.page = 1\r\n    this.fetch()\r\n  }\r\n\r\n  showImage = (id) => {\r\n    const image = this.state.gallery.find(\r\n      (image) => Number(image.id) === Number(id),\r\n    )\r\n    this.setState({ image })\r\n    this.toggleModal()\r\n  }\r\n\r\n  handleImageClick = (e) => this.showImage(e.target.id)\r\n\r\n  toggleModal = () => this.setState({ showModal: !this.state.showModal })\r\n\r\n  render() {\r\n    const { gallery, status, image, showModal } = this.state\r\n    const { handleImageClick, handleClick, toggleModal } = this\r\n\r\n    if (status === 'init') return <h1> </h1>\r\n\r\n    if (status === 'pending') return <LoaderSpinner />\r\n\r\n    if (status === 'success') {\r\n      return (\r\n        gallery.length > 0 && (\r\n          <>\r\n            <ul className=\"ImageGallery\">\r\n              {gallery.map((image) => (\r\n                <ImageGalleryItem\r\n                  image={image}\r\n                  onClickImage={handleImageClick}\r\n                />\r\n              ))}\r\n            </ul>\r\n            <Button onClick={handleClick} />\r\n            {showModal && <Modal image={image} toggleModal={toggleModal} />}\r\n          </>\r\n        )\r\n      )\r\n    }\r\n\r\n    if (status === 'error') return <h1>ALARMA!!!</h1>\r\n  }\r\n}\r\n","import './App.css'\nimport { Component } from 'react'\nimport { Searchbar } from './components/Searchbar/Searchbar'\nimport { ImageGallery } from './components/ImageGallery/ImageGallery'\n\nclass App extends Component {\n  state = {\n    searchValue: '',\n    perPage: 12,\n  }\n\n  getSearchValues = (searchValue, perPage) =>\n    this.setState({ searchValue, perPage })\n\n  render() {\n    return (\n      <div className=\"App\">\n        <>\n          <Searchbar getSearchValues={this.getSearchValues} />\n          <ImageGallery searchValue={this.state.searchValue} />\n        </>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}